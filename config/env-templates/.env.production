# Production Environment Configuration
# AI Schedule Manager - Production Settings

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
ENVIRONMENT=production
DEBUG_MODE=false

# Application URLs
FRONTEND_URL=https://yourdomain.com
BACKEND_URL=https://api.yourdomain.com
API_BASE_URL=https://api.yourdomain.com/api/v1

# =============================================================================
# DATABASE CONFIGURATION (Production)
# =============================================================================
# Use managed database service with encryption
DATABASE_URL=${PROD_DATABASE_URL}
DB_HOST=${PROD_DB_HOST}
DB_PORT=5432
DB_NAME=${PROD_DB_NAME}
DB_USER=${PROD_DB_USER}
DB_PASSWORD=${PROD_DB_PASSWORD}

# Optimized pool settings for production
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Connection encryption
DB_SSL_MODE=require
DB_SSL_CERT=${PROD_DB_SSL_CERT}
DB_SSL_KEY=${PROD_DB_SSL_KEY}
DB_SSL_CA=${PROD_DB_SSL_CA}

# =============================================================================
# CACHE CONFIGURATION (Production)
# =============================================================================
REDIS_URL=${PROD_REDIS_URL}
REDIS_HOST=${PROD_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${PROD_REDIS_PASSWORD}
REDIS_DB=0

# Optimized cache TTL for production
CACHE_TTL_SHORT=300      # 5 minutes
CACHE_TTL_MEDIUM=1800    # 30 minutes
CACHE_TTL_LONG=3600      # 1 hour

# Redis clustering for high availability
REDIS_CLUSTER_ENABLED=true
REDIS_SENTINEL_ENABLED=true

# =============================================================================
# SECURITY CONFIGURATION (Production)
# =============================================================================
JWT_SECRET_KEY=${PROD_JWT_SECRET_KEY}
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d

SESSION_SECRET=${PROD_SESSION_SECRET}
SESSION_COOKIE_MAX_AGE=28800000  # 8 hours

# Strict CORS for production
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true

# Maximum security for production
HELMET_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# Advanced security features
ENABLE_2FA=true
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL_CHARS=true
SESSION_ROTATION_ENABLED=true
BRUTE_FORCE_PROTECTION=true

# =============================================================================
# EXTERNAL SERVICES (Production)
# =============================================================================
# Production email service
SENDGRID_API_KEY=${PROD_SENDGRID_API_KEY}
EMAIL_FROM=support@yourdomain.com
EMAIL_FROM_NAME=AI Schedule Manager

# SMS service for production
TWILIO_ACCOUNT_SID=${PROD_TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${PROD_TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${PROD_TWILIO_PHONE_NUMBER}

# Push notifications
FIREBASE_PROJECT_ID=${PROD_FIREBASE_PROJECT_ID}
FIREBASE_PRIVATE_KEY=${PROD_FIREBASE_PRIVATE_KEY}
FIREBASE_CLIENT_EMAIL=${PROD_FIREBASE_CLIENT_EMAIL}

# Calendar integration
GOOGLE_CALENDAR_CLIENT_ID=${PROD_GOOGLE_CLIENT_ID}
GOOGLE_CALENDAR_CLIENT_SECRET=${PROD_GOOGLE_CLIENT_SECRET}
GOOGLE_CALENDAR_REDIRECT_URI=https://api.yourdomain.com/auth/google/callback

OUTLOOK_CLIENT_ID=${PROD_OUTLOOK_CLIENT_ID}
OUTLOOK_CLIENT_SECRET=${PROD_OUTLOOK_CLIENT_SECRET}
OUTLOOK_REDIRECT_URI=https://api.yourdomain.com/auth/outlook/callback

# No mocking in production
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# AI AND ML SERVICES (Production)
# =============================================================================
OPENAI_API_KEY=${PROD_OPENAI_API_KEY}
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=200

# Alternative AI services
ANTHROPIC_API_KEY=${PROD_ANTHROPIC_API_KEY}

# Production AI settings
MOCK_AI_RESPONSES=false
AI_RATE_LIMIT_ENABLED=true
AI_CACHE_ENABLED=true

# =============================================================================
# MONITORING AND OBSERVABILITY (Production)
# =============================================================================
# Comprehensive monitoring
SENTRY_DSN=${PROD_SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.01

NEW_RELIC_LICENSE_KEY=${PROD_NEW_RELIC_KEY}
NEW_RELIC_APP_NAME=ai-schedule-manager-production

# Production logging
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/app/production.log

# Structured logging
LOG_STRUCTURED=true
LOG_SAMPLING_RATE=0.1

# Monitoring endpoints
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_METRICS_PATH=/metrics

# =============================================================================
# FEATURE FLAGS (Production - Stable Only)
# =============================================================================
# Core production features
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_PUSH_NOTIFICATIONS=true

# Stable advanced features
FEATURE_AI_SCHEDULING=true
FEATURE_CALENDAR_SYNC=true
FEATURE_TEAM_COLLABORATION=true
FEATURE_ADVANCED_ANALYTICS=true

# Production integrations
FEATURE_SLACK_INTEGRATION=true
FEATURE_TEAMS_INTEGRATION=true
FEATURE_ZOOM_INTEGRATION=true

# Experimental features disabled in production
FEATURE_VOICE_COMMANDS=false
FEATURE_SMART_SUGGESTIONS=true
FEATURE_PREDICTIVE_SCHEDULING=false

# =============================================================================
# FILE STORAGE (Production)
# =============================================================================
UPLOAD_MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf
UPLOAD_DESTINATION=/var/uploads

# Production cloud storage
AWS_REGION=us-west-2
AWS_S3_BUCKET=${PROD_S3_BUCKET}
AWS_ACCESS_KEY_ID=${PROD_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${PROD_AWS_SECRET_ACCESS_KEY}
USE_LOCAL_STORAGE=false

# S3 configuration
S3_ENCRYPTION_ENABLED=true
S3_VERSIONING_ENABLED=true
S3_LIFECYCLE_ENABLED=true

# =============================================================================
# PERFORMANCE AND SCALING (Production)
# =============================================================================
PORT=8000
HOST=0.0.0.0
WORKERS=4

# Optimized timeouts for production
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000

# Background jobs with scaling
QUEUE_REDIS_URL=${PROD_REDIS_URL}/1
QUEUE_CONCURRENCY=10

# Performance optimization
ENABLE_COMPRESSION=true
COMPRESSION_THRESHOLD=1024
STATIC_FILE_CACHING=true
CACHE_CONTROL_MAX_AGE=86400

# =============================================================================
# HIGH AVAILABILITY AND SCALING
# =============================================================================
# Load balancing
ENABLE_LOAD_BALANCING=true
LOAD_BALANCER_ALGORITHM=round_robin

# Auto-scaling
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
SCALE_UP_THRESHOLD=70
SCALE_DOWN_THRESHOLD=30

# Health checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# BACKUP AND DISASTER RECOVERY (Production)
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=90

# Multi-region backup
BACKUP_CROSS_REGION=true
BACKUP_ENCRYPTION=true

# Point-in-time recovery
ENABLE_PITR=true
PITR_RETENTION_DAYS=7

MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.

# =============================================================================
# SSL AND SECURITY (Production)
# =============================================================================
# Force HTTPS
FORCE_HTTPS=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# Content Security Policy
CSP_ENABLED=true
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; frame-ancestors 'none';"

# Additional security headers
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# =============================================================================
# COMPLIANCE AND PRIVACY (Production)
# =============================================================================
# Full compliance in production
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years

ANALYTICS_ENABLED=true
COOKIE_CONSENT_REQUIRED=true
PRIVACY_POLICY_URL=https://yourdomain.com/privacy
TERMS_OF_SERVICE_URL=https://yourdomain.com/terms

# Audit logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555

# =============================================================================
# THIRD-PARTY INTEGRATIONS (Production)
# =============================================================================
# Production Slack integration
SLACK_BOT_TOKEN=${PROD_SLACK_BOT_TOKEN}
SLACK_SIGNING_SECRET=${PROD_SLACK_SIGNING_SECRET}
SLACK_CLIENT_ID=${PROD_SLACK_CLIENT_ID}
SLACK_CLIENT_SECRET=${PROD_SLACK_CLIENT_SECRET}

# Microsoft Teams
TEAMS_APP_ID=${PROD_TEAMS_APP_ID}
TEAMS_APP_PASSWORD=${PROD_TEAMS_APP_PASSWORD}

# Production webhooks
WEBHOOK_URL_PREFIX=https://api.yourdomain.com/webhooks

# =============================================================================
# NOTIFICATIONS AND ALERTS (Production)
# =============================================================================
# Production alert channels
SLACK_WEBHOOK_URL=${PROD_SLACK_WEBHOOK}
EMAIL_NOTIFICATIONS=${PROD_ALERT_EMAILS}

# Critical alert thresholds
ERROR_RATE_THRESHOLD=0.01
RESPONSE_TIME_THRESHOLD=1000
CPU_USAGE_THRESHOLD=70
MEMORY_USAGE_THRESHOLD=80
DISK_USAGE_THRESHOLD=85

# PagerDuty integration
PAGERDUTY_INTEGRATION_KEY=${PROD_PAGERDUTY_KEY}
PAGERDUTY_ENABLED=true

# =============================================================================
# API DOCUMENTATION (Production)
# =============================================================================
# Limited API docs in production
SWAGGER_ENABLED=false
API_DOCS_ENABLED=false

# =============================================================================
# FRONTEND CONFIGURATION (Production)
# =============================================================================
REACT_APP_API_URL=https://api.yourdomain.com
REACT_APP_ENVIRONMENT=production
REACT_APP_SENTRY_DSN=${PROD_FRONTEND_SENTRY_DSN}
REACT_APP_GOOGLE_ANALYTICS_ID=${PROD_GA_ID}

# Production optimizations
REACT_APP_ENABLE_SERVICE_WORKER=true
REACT_APP_CACHE_STRATEGY=cache-first

# =============================================================================
# DATABASE MIGRATIONS (Production)
# =============================================================================
# Careful migration configuration
AUTO_MIGRATE=false
MIGRATION_TIMEOUT=600
BACKUP_BEFORE_MIGRATION=true

# Migration safety
REQUIRE_MIGRATION_APPROVAL=true
MIGRATION_DRY_RUN=true

# =============================================================================
# BUSINESS METRICS AND ANALYTICS
# =============================================================================
# Business intelligence
ENABLE_BUSINESS_METRICS=true
METRICS_RETENTION_DAYS=365

# Revenue tracking
ENABLE_REVENUE_TRACKING=true
PAYMENT_PROCESSOR=stripe
STRIPE_PUBLIC_KEY=${PROD_STRIPE_PUBLIC_KEY}
STRIPE_SECRET_KEY=${PROD_STRIPE_SECRET_KEY}

# =============================================================================
# ENTERPRISE FEATURES
# =============================================================================
# SSO configuration
ENABLE_SSO=true
SAML_ENABLED=true
SAML_CERT=${PROD_SAML_CERT}
SAML_PRIVATE_KEY=${PROD_SAML_PRIVATE_KEY}

# Directory integration
LDAP_ENABLED=false
ACTIVE_DIRECTORY_ENABLED=false

# =============================================================================
# DISASTER RECOVERY
# =============================================================================
# Multi-region configuration
PRIMARY_REGION=us-west-2
BACKUP_REGION=us-east-1
ENABLE_CROSS_REGION_REPLICATION=true

# Failover configuration
ENABLE_AUTO_FAILOVER=true
FAILOVER_THRESHOLD=300  # 5 minutes
RTO_TARGET=3600         # 1 hour
RPO_TARGET=900          # 15 minutes
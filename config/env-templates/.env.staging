# Staging Environment Configuration
# AI Schedule Manager - Staging Settings

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
ENVIRONMENT=staging
DEBUG_MODE=false

# Application URLs
FRONTEND_URL=https://staging.yourdomain.com
BACKEND_URL=https://api-staging.yourdomain.com
API_BASE_URL=https://api-staging.yourdomain.com/api/v1

# =============================================================================
# DATABASE CONFIGURATION (Staging)
# =============================================================================
# Use managed database service in staging
DATABASE_URL=${STAGING_DATABASE_URL}
DB_HOST=${STAGING_DB_HOST}
DB_PORT=5432
DB_NAME=${STAGING_DB_NAME}
DB_USER=${STAGING_DB_USER}
DB_PASSWORD=${STAGING_DB_PASSWORD}

# Production-like pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# =============================================================================
# CACHE CONFIGURATION (Staging)
# =============================================================================
REDIS_URL=${STAGING_REDIS_URL}
REDIS_HOST=${STAGING_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}
REDIS_DB=0

# Production-like cache TTL
CACHE_TTL_SHORT=300      # 5 minutes
CACHE_TTL_MEDIUM=1800    # 30 minutes
CACHE_TTL_LONG=3600      # 1 hour

# =============================================================================
# SECURITY CONFIGURATION (Staging)
# =============================================================================
JWT_SECRET_KEY=${STAGING_JWT_SECRET_KEY}
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

SESSION_SECRET=${STAGING_SESSION_SECRET}
SESSION_COOKIE_MAX_AGE=86400000

# Restricted CORS for staging
CORS_ORIGINS=https://staging.yourdomain.com
CORS_CREDENTIALS=true

# Enhanced security for staging
HELMET_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=200

# =============================================================================
# EXTERNAL SERVICES (Staging)
# =============================================================================
# Use real services with test/staging keys
SENDGRID_API_KEY=${STAGING_SENDGRID_API_KEY}
EMAIL_FROM=staging@yourdomain.com
EMAIL_FROM_NAME=AI Schedule Manager Staging

# Real external service integration for testing
MOCK_EXTERNAL_SERVICES=false

# Staging calendar integration
GOOGLE_CALENDAR_CLIENT_ID=${STAGING_GOOGLE_CLIENT_ID}
GOOGLE_CALENDAR_CLIENT_SECRET=${STAGING_GOOGLE_CLIENT_SECRET}
GOOGLE_CALENDAR_REDIRECT_URI=https://api-staging.yourdomain.com/auth/google/callback

OUTLOOK_CLIENT_ID=${STAGING_OUTLOOK_CLIENT_ID}
OUTLOOK_CLIENT_SECRET=${STAGING_OUTLOOK_CLIENT_SECRET}
OUTLOOK_REDIRECT_URI=https://api-staging.yourdomain.com/auth/outlook/callback

# =============================================================================
# AI AND ML SERVICES (Staging)
# =============================================================================
OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=150

# Use real AI services for testing
MOCK_AI_RESPONSES=false

# =============================================================================
# MONITORING AND OBSERVABILITY (Staging)
# =============================================================================
# Full monitoring in staging
SENTRY_DSN=${STAGING_SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.1

NEW_RELIC_LICENSE_KEY=${STAGING_NEW_RELIC_KEY}
NEW_RELIC_APP_NAME=ai-schedule-manager-staging

# Production-like logging
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/app/staging.log

# Enable all monitoring
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_METRICS_PATH=/metrics

# =============================================================================
# FEATURE FLAGS (Staging - Selective)
# =============================================================================
# Core features enabled
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=false
FEATURE_PUSH_NOTIFICATIONS=true

# Advanced features for testing
FEATURE_AI_SCHEDULING=true
FEATURE_CALENDAR_SYNC=true
FEATURE_TEAM_COLLABORATION=true
FEATURE_ADVANCED_ANALYTICS=false

# Limited integrations in staging
FEATURE_SLACK_INTEGRATION=true
FEATURE_TEAMS_INTEGRATION=false
FEATURE_ZOOM_INTEGRATION=false

# Experimental features disabled in staging
FEATURE_VOICE_COMMANDS=false
FEATURE_SMART_SUGGESTIONS=true
FEATURE_PREDICTIVE_SCHEDULING=false

# =============================================================================
# FILE STORAGE (Staging)
# =============================================================================
UPLOAD_MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,application/pdf
UPLOAD_DESTINATION=/var/uploads

# Use cloud storage in staging
AWS_REGION=us-west-2
AWS_S3_BUCKET=${STAGING_S3_BUCKET}
AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY}
USE_LOCAL_STORAGE=false

# =============================================================================
# PERFORMANCE AND SCALING (Staging)
# =============================================================================
PORT=8000
HOST=0.0.0.0
WORKERS=2

# Production-like timeouts
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# Background jobs
QUEUE_REDIS_URL=${STAGING_REDIS_URL}/1
QUEUE_CONCURRENCY=3

# =============================================================================
# DEVELOPMENT AND TESTING (Staging)
# =============================================================================
DEBUG_MODE=false
MOCK_EXTERNAL_SERVICES=false
SEED_DATABASE=false

# Test database for integration tests
TEST_DATABASE_URL=${STAGING_TEST_DATABASE_URL}
TEST_REDIS_URL=${STAGING_REDIS_URL}/15

# API Documentation enabled for staging
SWAGGER_ENABLED=true
SWAGGER_UI_PATH=/docs
API_DOCS_ENABLED=true

# =============================================================================
# BACKUP AND MAINTENANCE (Staging)
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
BACKUP_RETENTION_DAYS=7

MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Staging system is under maintenance.

# =============================================================================
# THIRD-PARTY INTEGRATIONS (Staging)
# =============================================================================
# Slack integration for testing
SLACK_BOT_TOKEN=${STAGING_SLACK_BOT_TOKEN}
SLACK_SIGNING_SECRET=${STAGING_SLACK_SIGNING_SECRET}
SLACK_CLIENT_ID=${STAGING_SLACK_CLIENT_ID}
SLACK_CLIENT_SECRET=${STAGING_SLACK_CLIENT_SECRET}

# Webhook URLs
WEBHOOK_URL_PREFIX=https://api-staging.yourdomain.com/webhooks

# =============================================================================
# SSL AND SECURITY (Staging)
# =============================================================================
# SSL configuration
FORCE_HTTPS=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# Additional security headers
CSP_ENABLED=true
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"

# =============================================================================
# LOAD TESTING AND PERFORMANCE (Staging)
# =============================================================================
# Enable performance monitoring
ENABLE_PROFILING=true
PROFILING_SAMPLE_RATE=0.1

# Database query monitoring
SLOW_QUERY_THRESHOLD=1000  # 1 second
LOG_SLOW_QUERIES=true

# =============================================================================
# COMPLIANCE AND PRIVACY (Staging)
# =============================================================================
# Test compliance features
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365

ANALYTICS_ENABLED=true
COOKIE_CONSENT_REQUIRED=true
PRIVACY_POLICY_URL=https://staging.yourdomain.com/privacy
TERMS_OF_SERVICE_URL=https://staging.yourdomain.com/terms

# =============================================================================
# NOTIFICATIONS AND ALERTS (Staging)
# =============================================================================
# Team notifications for staging
SLACK_WEBHOOK_URL=${STAGING_SLACK_WEBHOOK}
EMAIL_NOTIFICATIONS=staging-team@yourdomain.com

# Alert thresholds for staging
ERROR_RATE_THRESHOLD=0.05
RESPONSE_TIME_THRESHOLD=2000
CPU_USAGE_THRESHOLD=80
MEMORY_USAGE_THRESHOLD=85

# =============================================================================
# CONTINUOUS DEPLOYMENT (Staging)
# =============================================================================
# Deployment configuration
DEPLOYMENT_ENVIRONMENT=staging
DEPLOYMENT_STRATEGY=rolling
HEALTH_CHECK_PATH=/health
READY_CHECK_PATH=/ready

# Rollback configuration
ENABLE_AUTO_ROLLBACK=true
ROLLBACK_ERROR_THRESHOLD=0.1
ROLLBACK_TIMEOUT=300

# =============================================================================
# FRONTEND CONFIGURATION (Staging)
# =============================================================================
REACT_APP_API_URL=https://api-staging.yourdomain.com
REACT_APP_ENVIRONMENT=staging
REACT_APP_SENTRY_DSN=${STAGING_FRONTEND_SENTRY_DSN}
REACT_APP_GOOGLE_ANALYTICS_ID=${STAGING_GA_ID}

# =============================================================================
# DATABASE MIGRATIONS (Staging)
# =============================================================================
# Migration configuration
AUTO_MIGRATE=true
MIGRATION_TIMEOUT=300
BACKUP_BEFORE_MIGRATION=true

# =============================================================================
# CUSTOM CONFIGURATIONS (Staging)
# =============================================================================
# Staging-specific customizations
STAGING_BANNER_ENABLED=true
STAGING_BANNER_MESSAGE=This is a staging environment - Test data only
STAGING_USER_LIMIT=100